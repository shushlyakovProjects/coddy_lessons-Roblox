<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROBLOX - Lesson 32</title>
    <link rel="stylesheet" href="../../css/base.css">
    <link rel="stylesheet" href="../../css/section.css">
    <link rel="stylesheet" href="../../css/media.css">
    <link rel="icon" href="../../img/base/favicon.png">
</head>

<body>

    <!-- 
    ИНСТРУКЦИЯ
    <h1></h1>
    <h2></h2>
    <h3></h3>
    <p></p>
    <p class="story"></p>
    <p class="code"></p>
    <p class="important"></p>
    <img src="" alt="">
    <div class="box__images2"> 
    -->

    <main>
        <header>
            <img src="../../img/base/logo.svg" alt="" class="logo">
            <h1>Создание игр в Roblox Studio</h1>
        </header>

        <section>
            <h1>Денежная система Roblox. Часть 2</h1>

            <p>Это занятие завершает 8 модуль курса и в нем мы завершим работу над денежной системой, начатой в прошлом занятии, и добавим интерфейс для магазина.</p>
            <p>Также мы рассмотрим, как с программной точки зрения реализуется магазин и добавление предметов в инвентарь игроков.</p>

            <h2>Программирование управления интерфейсом</h2>
            <h3>Подготовка к работе</h3>
            <p class="story">Прежде чем начинать работу с магазином, исправим поведение противника, добавленного в прошлом занятии. Для этого найдите противника в окне Explorer, раскройте его группу и откройте скрипт Script.</p>
            <img src="img/Screenshot_1.png" alt="">
            <p class="story">Измените значение переменной Distance с 10000 на 100. Это ограничит радиус работы противника, после чего он будет обнаруживать игрока только в радиусе 100 юнитов. Перенесите противника подальше от спаунпоинта, чтобы он не мешал во время тестирования интерфейса.</p>
            <img src="img/Screenshot_2.png" alt="">
            <p class="story">Измените значение стартового количества денег у игрока на 2000 или больше, изменив параметр Value переменной Cash из предыдущего занятия.</p>
            <img src="img/Screenshot_3.png" alt="">
            <p class="story">Последний этап подготовки - добавление специального объекта, в котором содержится интерфейс и скрипты, необходимые для этого занятия. В тулбоксе найдите модель Coddy_ShopUI.</p>
            <img src="img/Screenshot_4.png" alt="">
            <p class="story">Добавьте ее на сцену и раскройте ее дочерние объекты в окне Explorer. Внутри находится папка Powerups, которую необходимо перенести в ReplicatedStorage:</p>
            <div class="box__images2">
                <img src="img/Screenshot_5.png" alt="">
                <img src="img/Screenshot_6.png" alt="">
            </div>
            <p class="story">Также внутри находится интерфейс Shop_UI. Перенесите его в папку StarterGui и сделайте дочерним к объекту ScreenGui.</p>
            <img src="img/Screenshot_7.png" alt="">
            <p>Это интерфейс, подготовленный для работы в этом занятии. Теперь можно приступать к написанию скриптов и программированию магазина.</p>

            <h3>Кнопка закрытия интерфейса</h3>
            <p>Первый скрипт, который мы создадим, будет закрывать окно по нажатию на крестик в правом верхнем углу интерфейса:</p>
            <img src="img/Screenshot_8.png" alt="">
            <p>Выберите объект Shop_UI в окне Explorer и откройте его дочерние объекты. Shop_UI - это Frame, на котором находятся остальные объекты интерфейса.</p>
            <p class="important">Так как это главный объект в иерархии, если выключить его видимость (параметр Visible), все дочерние объекты также скроются. Именно это и должен сделать скрипт, который мы создадим - по нажатию на кнопку он должен изменить значение параметра Visible на false.</p>
            <p class="story">Создайте дочерний LocalScript для кнопки CloseButton:</p>
            <img src="img/Screenshot_9.png" alt="">
            <p>Добавим переменную frame, в которой будет храниться ссылка на объект Shop_UI. Также добавим переменную button для ссылки на саму кнопку.</p>
            <p class="important">Так как во время игры этот интерфейс будет храниться не в папке StarterGui, а перейдёт в папку локального игрока, ссылки на все объекты интерфейса лучше делать относительными, используя параметр Parent.</p>
            <img src="img/Screenshot_10.png" alt="">
            <p class="story">Добавим функцию, которая будет вызываться при нажатии на клавишу. Также добавим событие, обрабатывающее нажатие левой клавиши мыши по кнопке (MouseButton1Down) и подключим к ней функцию:</p>
            <img src="img/Screenshot_11.png" alt="">

            <h3>Кнопка открытия и закрытия магазина</h3>
            <p class="story">Теперь добавим кнопку открытия/закрытия магазина с аналогичным функционалом в верхний фрейм интерфейса, созданный на прошлом занятии. Выберите объект Frame, создайте в нем TextButton и добавьте к нему локальный скрипт:</p>
            <img src="img/Screenshot_12.png" alt="">
            <p class="story">Этот скрипт должен открывать интерфейс магазина, если он скрыт и закрывать, если он открыт. Добавим ссылки на фрейм магазина (Shop_UI) и кнопку:</p>
            <img src="img/Screenshot_13.png" alt="">
            <p class="story">Напишем функцию onPress(). Функция должна проверять значение параметра Visible интерфейса магазина и изменять его на противоположный:</p>
            <img src="img/Screenshot_14.png" alt="">
            <p class="story">Настройте внешний вид кнопки и проверьте ее работоспособность в игре:</p>
            <img src="img/Screenshot_15.png" alt="">

            <h2>Скрипты покупки</h2>
            <p>Следующие два скрипта, которые мы добавим - скрипты покупки. Они копируют хранящиеся в ReplicatedStorage объекты и добавляют их в инвентарь или скрипты игрока. Сперва добавим скрипт для покупки усилителя прыжка.</p>
            <h3>Покупка усилителя прыжка</h3>
            <p class="important">Усилители персонажей - это скрипты, добавляющиеся к скриптам игрока и изменяющие характеристики персонажа при помощи параметров компонента Humanoid. Эти скрипты уже готовы и находятся в папке Powerups, которую вы перенесли в ReplicatedStorage в начале занятия.</p>
            <p class="story">Добавим скрипт, клонирующий скрипт усиления прыжка и добавляющий его локальному игроку. Добавьте локальный скрипт к кнопке Jump_Button:</p>
            <img src="img/Screenshot_16.png" alt="">
            <p class="story">Добавим переменные со ссылками на локального игрока, количество его денег и саму кнопку:</p>
            <img src="img/Screenshot_17.png" alt="">
            <p class="important">Все действия, производящиеся скриптом, должны быть доступны только при условии, что у игрока есть достаточное количество денег, то есть значение параметра Value переменной Cash должно быть больше стоимости товара.</p>
            <p class="story">Добавим функцию и условия:</p>
            <img src="img/Screenshot_18.png" alt="">
            <p class="story">Если у игрока достаточное количество денег, скрипт должен создать копию (клон) скрипта Super_Speed_PS из папки Powerups и перенести ее в скрипты локального игрока (сделать папку PlayerScripts родительской для клона). Запишем эти действия в функцию:</p>
            <img src="img/Screenshot_19.png" alt="">
            <p class="story">Добавим уменьшение денег игрока и вызов функции по событию:</p>
            <img src="img/Screenshot_20.png" alt="">
            <p class="story">Запустите игру и попробуйте купить это усиление. Если все сделано верно, ваш персонаж будет прыгать в 2 раза выше.</p>
            <img src="img/Screenshot_21.png" alt="">

            <h3>Скрипт продажи оружия</h3>
            <p class="important">Скрипт продажи оружия работает схожим образом, клонируя объект из ReplicatedStorage и добавляя его в рюкзак игрока.</p>
            <p>Создадим скрипт покупки дробовика. Для этого, в первую очередь, нужно найти подходящий дробовик в тулбоксе и добавить его в ReplicatedStorage.</p>
            <p class="story">В тулбоксе введите в поиске Shotgun, и добавьте в сцену дробовик. Будьте внимательны - на вопрос Roblox "Добавить ли выбранное оружие в StarterPack" выберите No:</p>
            <img src="img/Screenshot_22.png" alt="">
            <p class="story">Создайте дополнительную папку в ReplicatedStorage и назовите Weapons. Перетащите дробовик из объектов сцены в эту папку. Теперь он хранится на сервере и будет доступен для клонирования.</p>
            <img src="img/Screenshot_23.png" alt="">
            <p class="story">В интерфейсе магазина найдите кнопку Shotgun_Button и добавьте к ней дочерний локальный скрипт. Он должен выполнять аналогичные с предыдущим скриптом действия, за исключением путей к объектам.</p>
            <img src="img/Screenshot_24.png" alt="">
            <p class="story">Напишите этот скрипт:</p>
            <img src="img/Screenshot_25.png" alt="">
            <p class="story">Запустите игру и попробуйте купить дробовик.</p>
            <img src="img/Screenshot_26.png" alt="">
            <p>Далее вам необходимо самостоятельно дописать недостающие скрипты для покупки двух оставшихся усилителей и оружия.</p>



            <hr>
            <h1>Домашкаа 😁</h1>
            <p>Данное занятие завершает 8-ой модуль курса. Необходимо ответить на вопросы для закрепления изученного материала.</p>
            <ol>
                <li>
                    <p>Что такое левел-дизайн?</p>
                    <ol type="a">
                        <li>Создание моделей, и оформление локаций уровня</li>
                        <li>Проработка сложности и баланса уровня</li>
                        <li>Работа с механикой передвижения и игровых ситуаций</li>
                    </ol>
                </li>
                <li>
                    <p>Как называется главная локация уровня для шутера?</p>
                    <ol type="a">
                        <li>Арена</li>
                        <li>Мид</li>
                        <li>Центр</li>
                    </ol>
                </li>
                <li>
                    <p>Что такое вертикальный геймплей?</p>
                    <ol type="a">
                        <li>Локация со множеством высоких зданий</li>
                        <li>Локация, арена которой находится выше остального уровня</li>
                        <li>Локация, в которой игроки двигаются на разной высоте</li>
                    </ol>
                </li>
                <li>
                    <p>Сколько маршрутов может быть в уровне?</p>
                    <ol type="a">
                        <li>2 - основной и боковой</li>
                        <li>3 - основной и два фланга</li>
                        <li>Больше 3 - основной, фланги и проходы между локациями</li>
                    </ol>
                </li>
                <li>
                    <p>Как правильно соблюдать масштаб объектов в сцене?</p>
                    <ol type="a">
                        <li>Выставить персонажа на сцене для контроля пропорций</li>
                        <li>Запускать игру и тестировать масштабы в игре</li>
                        <li>Пользоваться текстуры масштабной сетки</li>
                        <li>Все варианты верны</li>
                    </ol>
                </li>
                <li>
                    <p>Где хранятся объекты, продающиеся в магазине?</p>
                    <ol type="a">
                        <li>ServerStorage</li>
                        <li>ReplicatedStorage</li>
                        <li>ReplicatedFirst</li>
                    </ol>
                </li>
                <li>
                    <p>Как называется событие нажатия на кнопку интерфейса?</p>
                    <ol type="a">
                        <li>MouseButton1Down</li>
                        <li>MouseDown1Click</li>
                        <li>MouseButton1Click</li>
                    </ol>
                </li>
                <li>
                    <p>Что происходит, когда игрок покупает объект в магазине?</p>
                    <ol type="a">
                        <li>Объект клонируется и добавляется в инвентарь игрока</li>
                        <li>Объект переносится из ReplicatedStorage в инвентарь игрока</li>
                        <li>Сервер посылает команду создания объекта рядом с игроком</li>
                    </ol>
                </li>
                <li>
                    <p>Где хранится интерфейс магазина?</p>
                    <ol type="a">
                        <li>В папке StarterPlayerScripts</li>
                        <li>В папке StarterGui</li>
                        <li>В папке ServerGui</li>
                    </ol>
                </li>
            </ol>

        </section>
    </main>
</body>

</html>