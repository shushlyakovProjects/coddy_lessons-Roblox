<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROBLOX - Lesson 26</title>
    <link rel="stylesheet" href="../../css/base.css">
    <link rel="stylesheet" href="../../css/section.css">
    <link rel="stylesheet" href="../../css/media.css">
    <link rel="icon" href="../../img/base/favicon.png">
</head>

<body>

    <!-- 
    ИНСТРУКЦИЯ
    <h1></h1>
    <h2></h2>
    <h3></h3>
    <p></p>
    <p class="story"></p>
    <p class="code"></p>
    <p class="important"></p>
    <img src="" alt="">
    <div class="box__images2"> 
    -->

    <main>
        <header>
            <img src="../../img/base/logo.svg" alt="" class="logo">
            <h1>Создание игр в Roblox Studio</h1>
        </header>

        <section>
            <h1>Диалоговая система Roblox</h1>

            <h2>Диалоговая система</h2>
            <p>В этом занятии мы продолжим работу с игровыми персонажами (NPC) и добавим персонажу, созданному на прошлом занятии, диалоговую систему.</p>
            <p>В большинстве игр есть персонажи, разговаривающие с игроком и дающие ему различные квесты, рассказывающие о мире вокруг, продающие различные вещи и т.д. Все они взаимодействуют с игроком при помощи диалогов - фраз, на которые игрок должен ответить одним из предложенных вариантов ответных фраз.</p>
            <p>Для создания таких систем в Roblox Studio есть специальные объекты, позволяющие достаточно легко настроить диалог с таким персонажем.</p>
            <p>В течение этого занятия мы создадим диалоговую систему для персонажа и добавим несколько скриптов для анимации NPC при выборе игроком вариантов ответа на его реплики.</p>

            <h3>Создание диалога</h3>
            <p class="important">Для добавления NPC возможности разговаривать с игроком, в Roblox Studio используется специальный объект Dialog - модуль, расширяющий функционал NPC и сообщающий Roblox, что в этом персонаже предусмотрен диалог с игроком.</p>
            <p>Обычно Dialog добавляется в качестве дочернего объекта к голове NPC. Выберите вашего NPC, раскройте его группу в Explorer и найдите в частях тела голову.</p>
            <p class="story">Нажмите на плюс и добавьте объект Dialog:</p>
            <img src="img/Screenshot_1.png" alt="">

            <p>Чтобы диалог заработал, его нужно настроить. Откройте его настройки в окне Properties. Сперва необходимо настроить приветственную фразу персонажа, которую он произнесет при активации диалога. Для этого найдите параметр InitialPrompt. Текст, который вы укажете в этом параметре, будет произнесён NPC как приветственная реплика в начале диалога.</p>
            <p class="story">Измените текст на приветствие:</p>
            <img src="img/Screenshot_2.png" alt="">
            <p>Позже мы будем добавлять варианты ответа на реплики NPC, но одну из них мы можем добавить на этом этапе - реплику прощания.</p>
            <p class="story">Найдите параметр GoodbyeDialog и напишите фразу, которую будет произносить ваш персонаж при прощании с NPC. Сейчас она не будет доступна, однако после добавления вариантов ответа, вы увидите её в списке.</p>
            <img src="img/Screenshot_3.png" alt="">
            <p class="story">Теперь персонаж сможет заговорить с игроком. Запустите игру, подойдите к персонажу и нажмите на иконку диалога - NPC произнесет указанную вами фразу:</p>
            <img src="img/Screenshot_4.png" alt="">
            <p class="important">Также можно изменить дополнительные настройки Purpose и Tone. Purpose изменяет тип диалога. По умолчанию доступны три варианта: Help, Quest и Shop.</p>
            <p class="story">Укажите вариант Quest, чтобы игрокам было понятно, что этот персонаж выдаст им задание.</p>
            <p class="important">Тон определяет отношение NPC к игроку: нейтральное, дружеское или агрессивное.</p>
            <p class="story">Установите дружеское, чтобы изменить цветовую маркировку диалога.</p>
            <img src="img/Screenshot_5.png" alt="">

            <h3>Диалоговое дерево</h3>
            <p>В большинстве хороших игр диалоги строятся по системе диалогового дерева: одна реплика NPC дает игроку несколько вариантов ответа на неё. В зависимости от выбранного варианта, NPC произнесет одну или другую ответную реплику.</p>
            <p class="important">Если игра подразумевает глубокие и проработанные диалоги, вариации ответов и возможных развитий разговора могут разрастаться в запутанную структуру связанных между собой сложной логикой переходов из одного блока диалога в другой. Такая система называется диалоговым деревом (DialogTree) и обычно создается геймдизайнерами и сценаристами.</p>
            <p>В Roblox Studio есть возможность создавать подобные структуры, однако это достаточно сложный процесс, поэтому в этом занятии мы рассмотрим базовый подход к созданию диалоговых систем, добавляя различные ответы игрока на реплики NPC в окне Explorer.</p>

            <h3>Добавление вариантов ответа</h3>
            <p class="story">Добавим первый ответ. Выберите объект Dialog в Explorer и добавьте к нему дочерний объект DialogChoice.</p>
            <img src="img/Screenshot_6.png" alt="">
            <p>Это ещё один специальный объект, позволяющий добавлять дополнительные варианты ответа на реплики NPC.</p>
            <p class="story">Откройте его настройки в окне Properties. Чтобы настроить ответ и последующую реплику персонажа, нужно настроить два параметра: UserDialog и ResponseDialog.</p>
            <img src="img/Screenshot_7.png" alt="">
            <p class="important">UserDialog - это ответ игрока на предыдущую реплику NPC, записанную в родительском объекте. Именно эту строку вы увидите в списке возможных ответов. ResponseDialog - ответ NPC на выбранную игроком реплику.</p>
            <p class="story">Настройте эти параметры:</p>
            <img src="img/Screenshot_8.png" alt="">
            <p class="story">Запустите игру и подойдите к персонажу. Как и в прошлый раз, нажмите на диалог, и вы увидите, что у игрока появились две возможные реплики: ответ, записанный в DialogChoice, и прощальная реплика из родительского объекта Dialog.</p>
            <img src="img/Screenshot_9.png" alt="">
            <p>Таким образом можно добавлять множество различных веток диалога, создавая сложные и интересные разговоры между игроком и NPC.</p>
            <p class="story">Чтобы не запутаться в ответах игрока, переименуйте объекты DialogChoice:</p>
            <img src="img/Screenshot_10.png" alt="">
            <p class="story">Следующий шаг - добавить ещё одну ступень разговора. Продолжим ветку, в которой игрок интересуется, что от него хочет NPC. Выберите соответствующую ветку диалога и добавьте к ней дочерний DialogChoice. Этот вариант ответа будет доступен, если игрок выберет родительскую реплику.</p>
            <img src="img/Screenshot_11.png" alt="">
            <p class="story">Настройте этот ответ так, чтобы в нём игрок интересовался квестом, а NPC рассказал про него:</p>
            <img src="img/Screenshot_12.png" alt="">
            <p class="story">Добавьте ещё один вариант ответа к первой реплике и самостоятельно настройте его. Запустите игру и посмотрите на результат.</p>
            <img src="img/Screenshot_13.png" alt="">
            <p>На данном этапе работа с диалогом завершена.</p>
            
            
            <h2>Добавление анимации к NPC</h2>
            <p>В предыдущем модуле мы создавали различную анимацию персонажей. У вас есть анимация взмаха рукой, прыжка, танца и удара. Также есть анимациии, которые вы создавали в домашней работе самостоятельно.</p>
            <p>Теперь давайте прикрепим одну из созданных ранее анимаций к NPC, у которого настроен диалог.</p>
            <p class="story">Найдите персонажа в окне Explorer, после чего нажмите на плюсик рядом с ним и добавьте скрипт:</p>
            <img src="img/Screenshot_14.png" alt="">
            <p class="story">Далее нажмите на плюсик рядом со скрипом и добавьте объект Animation:</p>
            <img src="img/Screenshot_15.png" alt="">
            <p class="story">Нажмите на добавленный объект Animation и зайдите в окно Properties. У анимации есть свойство AnimationId, куда вставляют ID анимации, т.е. её уникальный номер.</p>
            <img src="img/Screenshot_16.png" alt="">
            <p class="story">Откройте ToolBox, раздел с лампочкой и выберите Animations. Здесь есть список опубликованных вами анимаций. Если там пусто, то сначала опубликуйте какую-нибудь анимацию в Roblox.</p>
            <img src="img/Screenshot_17.png" alt="">
            <p class="story">Выберите ту анимацию, которая соответствует типу вашего персонажа. Если персонаж типа R6, то ему подойдёт только анимация для R6. Нажмите на выбранную анимацию правой клавишей и скопируйте её ID (Copy Asset ID):</p>
            <img src="img/Screenshot_18.png" alt="">
            <p>Ещё раз выберите добавленный объект Animation в окне Explorer и далее в окне Properties вставьте скопированный ID в строку AnimationId.</p>
            <p class="story">Откройте скрипт и добавьте в него следующий код, который загружает анимацию персонажа и бесконечно проигрывает её во время игры:</p>
            <img src="img/Screenshot_19.png" alt="">
            <p>Всё готово! Теперь запустите игру и проверьте, работает ли анимация у NPC. Анимация может не работать, если вы выбрали анимацию, неподходящую для вашего типа персонажа, попробуйте выбрать другую анимацию, вставить её ID, как описано выше, и попробуйте запустить игру ещё раз.</p>
            


            <hr>
            <h1>Домашкаа 😁</h1>
            <p>Необходимо придумать и создать ещё один диалог для NPC, созданного в предыдущем домашнем задании. В диалоге должно быть несколько веток. По желанию можно применить какую-нибудь анимацию к NPC.</p>

        </section>
    </main>
</body>

</html>