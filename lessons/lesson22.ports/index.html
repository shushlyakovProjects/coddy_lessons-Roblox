<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROBLOX - Lesson 22</title>
    <link rel="stylesheet" href="../../css/base.css">
    <link rel="stylesheet" href="../../css/section.css">
    <link rel="stylesheet" href="../../css/media.css">
    <link rel="icon" href="../../img/base/favicon.png">
</head>

<body>

    <!-- 
    ИНСТРУКЦИЯ
    <h1></h1>
    <h2></h2>
    <h3></h3>
    <p></p>
    <p class="story"></p>
    <p class="code"></p>
    <p class="important"></p>
    <img src="" alt="">
    <div class="box__images2"> 
    -->

    <main>
        <header>
            <img src="../../img/base/logo.svg" alt="" class="logo">
            <h1>Создание игр в Roblox Studio</h1>
        </header>

        <section>
            <h1>IK-анимация</h1>

            <h2>IK и FK - два подхода к созданию анимации</h2>
            <p>Это занятие продолжает тему предыдущего - в нём нам предстоит познакомиться со вторым подходом в создании анимации, который называется Inversed Kinematics. В анимации существует два подхода к созданию анимаций: Forward Kinematics и Inversed Kinematics.</p>
            <img src="img/animation.gif" alt="">
            <p>Первый подход (Forward Kinematics или сокращённо FK) мы изучили в предыдущем занятии. Он основывается на последовательном изменении каждого сустава по отдельности. Повороты суставов идут от родительских костей к дочерним и настраиваются последовательно, напрямую. Благодаря этому такой подход позволяет добиться самого точного результата, однако занимает намного больше времени при создании более сложных анимаций.</p>
            <p class="important">Помимо FK существует второй подход, который называется Inversed Kinematics или IK. В отличие от предыдущего, он позволяет изменять повороты костей автоматически, выставляя промежуточные кости в правильное и органичное положение. В IK кости соединены друг с другом и, перемещая одну из костей, вы автоматически перемещаете и все связанные с ней кости, как в человеческом теле.</p>
            <p>Наглядно показать этот принцип можно на примере собственного тела: если потянуть руку за кисть, локоть переместится вслед за ней, самостоятельно найдя правильный угол и положение в пространстве. На этом основана система Inversed Kinematics, благодаря которой можно выстраивать намного более органичные и живые позы персонажа.</p>
            
            <h2>Создание персонажа R15</h2>
            <p>Для этого занятия нужно создать нового персонажа, тело которого будет состоять не из 6, а из 15 частей. В более сложном персонаже присутствуют локти, колени, ступни и кисти, которые будут задействованы в работе с системой IK.</p>
            <h3>Создание персонажа</h3>
            <p class="story">Перейдите в раздел Avatar и при помощи плагина Rig Builder создайте любого персонажа в системе R15.</p>
            <img src="img/Screenshot_1.png" alt="">
            <p class="story">Откройте Animation Editor. Как и в предыдущем занятии, сперва необходимо назвать будущий клип анимации. В качестве примера будет разобрана анимация танца. Назовите анимацию dance.</p>
            <img src="img/Screenshot_2.png" alt="">
            <p class="story">Добавьте к анимируемым деталям все части персонажа: нажмите на иконку + и выберите вариант Add All Body.</p>
            <img src="img/Screenshot_3.png" alt="">
            <p class="story">После этого добавьте все ключи для всех частей (правый клик на строке под таймлайном - Add Keyframe Here).</p>
            <img src="img/Screenshot_4.png" alt="">

            <h3>Включаем систему IK</h3>
            <p class="story">Следующим шагом необходимо включить систему IK, для этого нажмите на одноимённую кнопку около имени персонажа:</p>
            <img src="img/Screenshot_5.png" alt="">
            <p>После этого откроется дополнительное окно, в котором будет представлена полная иерархия костей персонажа. Нужно нажать кнопку Enable IK. В этой иерархии отображается то, как кости подчинены друг другу, подобно родительско-дочерним отношениям объектов в окне Explorer:</p>
            <img src="img/Screenshot_6.png" alt="">
            <p>Особенность инвертированной кинематики в том, что в отличие от прямой кинематики, чем ниже в иерархии находится кость, тем больше родительских костей она будет перемещать за собой. Поэтому она называется инвертированной или обратной.</p>

            <h2>Анимация танца</h2>
            <p class="story">Эта анимация будет длиннее, чем в прошлом занятии. Прежде чем приступать к работе, измените длительность анимационного клипа. Для этого в строке управления анимации замените второе значение с 1 на 2:</p>
            <img src="img/Screenshot_7.png" alt="">
            <h3>Начальная поза персонажа</h3>
            <p class="story">Поставим персонажа в начальную позу. Для этого мы будем перемещать кисти и стопы персонажа. Выберите одну из кистей персонажа и при помощи инструмента перемещения передвиньте её в желаемое положение.</p>
            <p>Локоть переместится самостоятельно. Вы заметите, что движение производится медленнее, чем обычно. Это нормально - такое ограничение с точки зрения разработчиков Roblox облегчает работу со слишком подвижными суставами персонажа.</p>
            <img src="img/Screenshot_8.png" alt="">
            <p>После этого переместите вторую руку в любое положение и приступите к перемещению стоп персонажа. Во время перемещения кистей и стоп вы можете столкнуться с плохо управляемыми или недостаточно разворачиваемыми коленями/локтями. Это связано с тем, что у каждого сустава есть ограничение поворотов, не позволяющее им установиться в неправильные положения. Чтобы это обойти, разверните стопу/кисть и продолжите перемещение.</p>
            <p class="story">Завершите выставление позы, переместив тазовый сустав вниз - это позволит персонажу присесть. Также, изменяя поворот части UpperTorso, можно наклонить торс персонажа в одну или в другую сторону.</p>
            <img src="img/Screenshot_9.png" alt="">

            <h3>Выставляем вторую позу</h3>
            <p class="story">Перейдите в 15-й кадр (отметка 0.5 на таймлайне) и выставьте персонажа в следующую позу. В ней он будет находиться в приседе на одной из ног. Принцип действий такой же, как и в предыдущем шаге, поэтому подробно разобран не будет.</p>
            <img src="img/Screenshot_10.png" alt="">
            <h3>Переход в новую позу</h3>
            <p class="story">Перейдите в 30-й кадр (он обозначен цифрой 1, так как находится на 1 секунде от начала анимации). Поставьте персонажа в нейтральную позу, из которой он будет присаживаться на вторую ногу.</p>
            <p>Эта поза не обязательно должна быть абсолютно ровной, при желании, оставьте наклон или небольшой присед персонажа.</p>
            <img src="img/Screenshot_11.png" alt="">
            <p class="story">Перейдите в 45-ый кадр и сделайте позу для приседа на вторую ногу.</p>
            <img src="img/Screenshot_12.png" alt="">

            <h3>Итоговая поза и цикличность анимации</h3>
            <p>После того, как основной танец готов, перейдите в последний кадр (отметка 2) и поставьте персонажа в ещё одну нейтральную позу - она будет закрывать и открывать танец. Это может быть копия средней позы или новая.</p>
            <p>Так как анимация танца после окончания должна воспроизводиться заново, пока не будет прервана, необходимо сделать так, чтобы её окончание и начало не были заметны. Такие анимация называется цикличными.</p>
            <p class="story">Для того, чтобы они работали правильно, обязательно нужно скопировать все ключи последнего кадра и вставить их в первый. Таким образом, анимация закончится в той позе, в которой начиналась, и при переходе на новый цикл она будет воспроизводиться бесшовно.</p>
            <img src="img/Screenshot_13.png" alt="">
            <p>Анимация танца готова! Сохраните её, нажав на три точки около имени анимации и выбрав вариант Save.</p>

            <h2>Анимация удара</h2>
            <p>Вторая анимация в этом занятии - анимация действия, например, удара. Эта анимация отличается от предыдущей, так как не является цикличной: она начинается в одной позе, а заканчивается в другой. Такой тип анимации характерен для активных действий, единожды вызываемых в различных ситуациях.</p>
            <h3>Создаём новую анимацию. Стартовая позиция</h3>
            <p class="story">Создайте новую анимацию, нажав на три точки около имени анимации и выбрав вариант new. Назовите анимацию JumpPunch. Добавьте все суставы к анимированном частям, затем добавьте стартовые ключи в первом кадре.</p>
            <img src="img/Screenshot_14.png" alt="">
            <p class="story">Установите персонажа в стартовую позицию: он должен находиться в позе, подготавливающей его и к прыжку, и удару. Нога, которая будет наносить удар, должна находиться сзади, опорная нога - спереди, корпус развёрнут, руки в защитной стойке, голова чуть наклонена вперёд:</p>
            <img src="img/Screenshot_15.png" alt="">

            <h3>Анимация прыжка</h3>
            <p class="story">Перейдите в кадр 6. В этом кадре персонаж должен немного присесть и подготовиться к прыжку, немного развернувшись корпусом.</p>
            <img src="img/Screenshot_16.png" alt="">
            <p>Перейдите в кадр 12. В этом кадре персонаж должен подпрыгнуть в воздух и выбросить ударную ногу вперёд. Чтобы это сделать, необходимо сначала переместить тело персонажа вверх, подняв его над землёй. Если попытаться сделать это, перемещая ключевую кость LowerTorso, персонаж просто выпрямится, но не оторвётся от земли.</p>
            <p class="story">В окне Manage IK слева найдите переключатель Body Part/Full Body. Это режимы работы с костями персонажа. Переключитесь в режим Full Body, он позволяет перемещать всё тело персонажа, а не отдельную кость.</p>
            <img src="img/Screenshot_17.png" alt="">
            <p class="story">Поднимите персонажа над землёй, после чего переключитесь обратно в режим Body Part и закончите позу персонажа.</p>
            <p>Ударная нога должна вытянуться вперёд, корпус развернуться в сторону удара, опорная нога - переместиться назад и немного подогнуться под корпус.</p>
            <img src="img/Screenshot_18.png" alt="">
            <p class="story">Перейдите в 21-й кадр и приземлите персонажа. Поставьте его в финальную позу и воспроизведите анимацию. На этом можно завершить работу с данной анимацией, однако по желанию можно добавить несколько деталей, которые увеличат реалистичность движений.</p>
            <img src="img/Screenshot_19.png" alt="">
            <p>Анимация удара готова! Не забудьте её сохранить.</p>



            <hr>
            <h1>Домашкаа 😁</h1>
            <p>Нужно самостоятельно сделать ещё одну анимацию персонажа R15, используя полученные на занятии знания. Например, это может быть анимация какого-либо базового движения, эмоция, спортивное упражнение, получение урона и т.д. Не забудьте сохранить свою анимацию и карту :)</p>

        </section>
    </main>
</body>

</html>