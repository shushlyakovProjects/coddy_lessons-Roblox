<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROBLOX - Lesson 5</title>
    <link rel="stylesheet" href="../../css/base.css">
    <link rel="stylesheet" href="../../css/section.css">
    <link rel="stylesheet" href="../../css/media.css">
    <link rel="icon" href="../../img/base/favicon.png">
</head>

<body>

    <main>
        <header>
            <img src="../../img/base/logo.svg" alt="" class="logo">
            <h1>Создание игр в Roblox Studio</h1>
        </header>

        <section>
            <h1>Программирование на Lua - цикл While</h1>

            <h2>Что такое цикл?</h2>
            <p>Циклы - это специальные управляющие конструкции в программировании, созданные для того, чтобы более удобным и быстрым способом записывать программный код для выполнения повторяющихся действий.</p>
            <p class="story">Вместо того чтобы писать одно и то же действие много раз подряд, можно сразу попросить программу повторить действие то количество раз, которое вам нужно.</p>
            <img src="img/cycle.png" alt="" class="small_image">

            <h2>Бесконечные циклы. Цикл While</h2>
            <h3>Задача 1 - Вращающаяся дверь</h3>
            <p>В данной задаче есть цилиндрическая дверь с вырезом, через которую можно пройти, но для этого необходимо сделать так, чтобы она начала вращаться. Решить такую задачу можно с помощью бесконечного цикла.</p>
            <img src="img/Screenshot_1.png" alt="">

            <p>В программировании есть 2 главных цикла - While и For. Главное их различие заключается в том, что While может быть бесконечным, то есть повторяться непрерывно на протяжении всей работы программы, а For обязательно заканчивается.</p>
            <p>Для решения 1-ой задачи необходимо заставить дверь вращаться вокруг своей вертикальной оси (ось Y).</p>
            <p class="story">Найдём дверь в окне Explorer и добавим к ней дочерний объект Script, в котором и будем писать код для задачи:</p>
            <img src="img/Screenshot_2.png" alt="" class="small_image">

            <p>После открытия скрипта первым делом необходимо удалить заранее написанный код и создать переменную со ссылкой на дверь. На этом занятии будет использован более гибкий и правильный способ ссылки на объекты.</p>
            <p>На прошлом занятии мы создавали "жёсткую" ссылку на объект. Если целевой объект будет удалён или переименован, то скрипт не сможет найти данный объект, в результате чего ссылка станет неактивной. Поэтому мы будем использовать ссылку, основанную на родительско-дочерних отношениях - <b>script.Parent</b>.</p>
            <p class="important">Если внутри скрипта написать ключевое слово <b>script</b>, это будет прямым указанием на сам скрипт, в котором мы пишем код.</p>
            <p>Таким образом, где бы ни находился этот скрипт, с помощью ключевого слова <b>script</b> он всегда сможет сослаться на самого себя и получить доступ к своим родительским и дочерним объектам.</p>
            
            <p class="story">Дверь Door_Rotate является родительским объектом для нашего скрипта, обратимся к ней в коде через свойство Parent: </p>
            <p class="code">door = script.Parent</p>
            
            <p><b>Теперь добавим в скрипт повторяющееся действие</b></p>
            <p>Нам необходимо каждый повтор цикла увеличивать угол поворота двери по оси Y.</p>
            <p class="important">Чтобы увеличить какую-то величину в программном коде на заданное значение, можно использовать быстрый оператор сложения +=.</p>
            <p class="story">Запишем эту команду в скрипте:</p>
            <p class="code">door.Orientation += Vector3.new(0,1,0)</p>

            <p><b>Добавим в скрипт цикл While</b></p>
            <p>Сначала запишем структуру цикла. While - условный цикл, то есть он будет выполняться непрерывно, пока условие его выполнения верно.</p>
            <p class="story">Cтруктура цикла While следующая:</p>
            <p class="code">while [условие] do<br>[тело цикла]<br>end</p>

            <p class="story">На этом занятии мы будем использовать условие true, которое всегда верно. Перенесём тело цикла внутрь конструкции:</p>
            <img src="img/Screenshot_3.png" alt="">
            <p>Программа почти готова. Если запустить игру сейчас, то она зависнет и после этого запустится без скрипта. Это происходит из-за того, что повторения цикла выполняются слишком быстро и игра перегружается.</p>

            <p><b>Добавим в скрипт паузу между повторениями цикла</b></p>
            <p class="important">Чтобы избежать зависания игры, в тело цикла нужно всегда добавлять команду wait() для небольших пауз между повторениями цикла.</p>
            <p>Если оставить скобки пустыми, пауза будет минимальным количеством времени внутри игры. Если же написать внутрь скобок число, то мы укажем количество секунд, которое игра будет ждать.</p>
            <p class="story">Добавим команду wait() и закончим программу:</p>
            <img src="img/Screenshot_4.png" alt="">

            <p>Запустим игру и посмотрим на результат работы скрипта - дверь начала вращаться, и теперь мы можем идти дальше!</p>
            <img src="img/Screenshot_5.png" alt="">

            <h1>Основы анимации</h1>

            <h2>Подготовка к работе и теория</h2>
            <h3>Что такое анимация?</h3>
            <p>В этом занятии мы начнём изучать следующую большую тему - анимацию в Roblox Studio.</p>
            <p class="important">Анимация - это процесс добавления движений статичным объектам. Это могут быть как трехмерные, так и двумерные объекты. Само название «анимация» происходит от латинского слова anima - душа. То есть, анимация - это процесс «вселения» в объекты души, чтобы сделать их «живыми».</p>
            <img src="img/animation.gif" alt="">
            <p>Скорее всего, вы уже знакомы с базовым приемом анимации: на разных листах блокнота последовательно рисуются разные движения персонажа и при быстром пролистывании этих рисунков персонаж начинает «двигаться». Это основной принцип анимации, который лежит в основе как трехмерной, так и двумерной анимации.</p>
            <p>В Roblox Studio анимируются объемные объекты, то есть мы работаем с трехмерной анимацией. Она несколько сложнее, чем анимация двумерная, но при этом технически гораздо проще.</p>
            <h3>Как работает анимация?</h3>
            <p>Любой персонаж в компьютерной игре, как и любой двигающийся неживой объект, изначально представляет из себя обычную 3D-модель, ничем не отличающуюся от других объектов в игре. Принцип анимации трехмерных объектов достаточно сложен, но очень интересен. Он взят из реальной жизни и действует по тем же принципам, что и движение человеческого тела.</p>
            
            <p>Внутри любого двигающегося объекта, как внутри человеческого тела, находится система из костей и суставов, называющаяся скелетом. На самом деле, во время анимации двигаются именно они, а 3D-модель «прикрепляется» к скелету и следует за управляющими ею костями. Таким образом, при изменении положения кости или повороте сустава вы видите движение тела персонажа.</p>
            <p>В базовых персонажах Roblox Studio используется упрощенная система анимации, основанная на связанных частях тела персонажа. Однако, если вы будете анимировать более сложных персонажей, состоящих не из отдельных деталей, а полноценных моделей, вам придётся работать именно со скелетной системой.</p>
            <p>В этом занятии мы познакомимся с основами анимации и будем использовать самого простого персонажа.</p>
            <h3>Создание персонажа для анимации</h3>
            <p class="story">Чтобы приступить к анимации персонажа, сначала необходимо его создать. Для этого используем встроенный плагин, который называется Rig Builder. Перейдите на вкладку Avatar и найдите его в списке (он не требует установки и устанавливается по умолчанию).</p>
            <img src="img/Screenshot_6.png" alt="">
            <p class="story">Появится окно выбора рига персонажа. Риг - это система строения персонажа. В Roblox существует два базовых типа персонажей - R6 и R15.</p>
            <img src="img/Screenshot_7.png" alt="">
            <p class="important">Эти названия - обозначения количества суставов внутри персонажа. Риг R6 состоит из шести частей тела: две ноги, две руки, туловище и голова. В R15 ноги и руки состоят из трех деталей, позволяющих делать более сложные и реалистичные движения, тело разделено на верхнюю и нижнюю части.</p>
            <p>Для простоты работы в этом занятии мы выберем R6. Переключитесь на соответствующую вкладку и выберите <b>Block Avatar</b>. После этого у вас будет создан персонаж.</p>

            <h2>Создание анимации</h2>
            <h3>Окно анимации</h3>
            <p class="story">Теперь можно приступать к изучению анимации. Выберите персонажа и в во вкладке Avatar найдите следующий встроенный инструмент - Animation editor.</p>
            <img src="img/Screenshot_8.png" alt="">
            <p>Этот плагин позволяет создавать анимацию непосредственно внутри Roblox Studio. В левом верхнем углу окна нужно ввести название анимации. Мы будем создавать анимацию приветствия, в которой персонаж будет махать рукой. Поэтому введите название Wave Hand.</p>
            <img src="img/Screenshot_9.png" alt="">
            <p>После этого активируется редактор анимации. Окно разделено на три главные области: настройки анимации, список анимируемых деталей, а также поле для ключей и таймлайн - самая большая часть окна находящийся справа.</p>
            <img src="img/Screenshot_10.png" alt="">
            <p>Подготовимся к анимации. Чтобы иметь возможность анимировать части тела персонажа, их нужно добавить к списку анимируемых объектов. Для этого нажмите на иконку с плюсом около имени персонажа. В выпадающем списке вы можете выбрать конкретную часть тела, которую хотите анимировать, или добавить сразу все детали персонажа.</p>
            <p class="story">Так и поступим - выберем самый нижний вариант - <b>Add All Body</b>:</p>
            <img src="img/Screenshot_11.png" alt="">
            <p>В список слева добавятся все части тела персонажа и теперь, нажимая на имя деталей, можно выбирать каждую деталь по отдельности.</p>

            <h3>Ключ анимации</h3>
            <p>Анимация - это плавное изменение параметров объектов (в нашем случае поворотов и положений) с течением времени. Чтобы изменять состояние объекта, необходимо записывать их в разные моменты времени.</p>
            <p class="important">Roblox будет автоматически записывать их, создавая для выбранной детали так называемые ключи, когда вы измените ее состояние. Ключ анимации - это сохранённое состояние анимированного объекта в отдельный момент времени. Вам не обязательно создавать все движения персонажа, как вы бы делали это в двумерной анимации (вспомните пример с блокнотом и отдельными кадрами на каждом листочке).</p>
            <p>Вместо этого вы можете записать в первом кадре одну начальную позу персонажа, а в последнем - изменить ее на финальную. Таким образом, вы создадите всего две ключевые позы, а остальные движения между ключевыми кадрами Roblox просчитает самостоятельно.</p>
            <p class="story">В первую очередь необходимо записать начальное положение персонажа - его первую ключевую позу. Для этого нужно, чтобы Roblox записал ключи для всех частей тела. Найдите верхнюю пока что пустую строку ключей напротив имени персонажа.</p>
            <img src="img/Screenshot_12.png" alt="">
            <p>Кликните по ней правой кнопкой мыши и выберите опцию <b>Add Keyframe Here</b>. Обратите внимание: у вас добавились серые ромбы около каждой части тела и белый ромб на верхней строке. Это - ключи. Белый ключ - это главный ключ кадра. Он изменяет все нижние ключи. Серые - ключи отдельных частей тела, они отвечают только за состояние своей детали. Теперь состояние персонажа в первом кадре записано, и мы можем переходить к анимации руки.</p>
            <img src="img/Screenshot_13.png" alt="">

            <h3>Анимация руки</h3>
            <p>Анимации состоят из кадров, в каждом из которых персонаж производит какое-то движение. Кадры можно сравнить с минутами и секундами. Каждая минута делится на 60 секунд. Если разделить 1 секунду на более мелкие отрезки времени, получится, что за одну секунду пройдет какое-то количество более коротких «мгновений». Эти мгновения и называются кадрами. Каждый кадр - это лист бумаги с нарисованным движением персонажа из примера с блокнотом.</p>
            <p class="important">В 1 секунде может быть неограниченное количество кадров, однако, в индустрии есть несколько стандартов: 24, 30 и 60 кадров в секунду. В зависимости от количества кадров в секунду, меняется сложность анимации.</p>
            <p>Вы можете увидеть обозначение кадров в верхней полосе рабочей области Animation editor. Эта полоса называется таймлайн. Перемещая синий слайдер по таймлайну, можно прокручивать анимацию между кадрами и записывать состояние персонажа в выбранных кадрах.</p>
            <img src="img/Screenshot_14.png" alt="">
            <p>С помощью слайдера перейдите в 1-й кадр (то есть отметка 0.1 на таймлайне) и выберите правую руку персонажа. Поверните руку персонажа наверх на 90° по оси Z (синяя окружность). В таймлайне добавился новый ключ - Roblox увидел, что вы изменили положение руки, и сохранил новое положение в анимацию.</p>
            <p class="story">Так же с помощью слайдера перейдите во 2-й кадр (отметка 0.2) и поверните руку вверх по оси Z ещё на 90°. Рука будет расположена вертикально.</p>
            <div class="box__images2">
                <img src="img/Screenshot_15.png" alt="">
                <img src="img/Screenshot_16.png" alt="">
            </div>
            <p>Попробуйте переместить слайдер таймлайна между кадрами 0 и 2 - вы увидите, что персонаж самостоятельно поворачивает руку между ключевыми кадрами.</p>
            <p class="story">Теперь нужно сделать так, чтобы персонаж помахал рукой. Перейдите в 3-й кадр и поверните руку по красной оси влево. Перейдите в кадр 4 и поверните руку вправо, чтобы персонаж помахал один раз. Теперь в анимации есть два движения руки: подъем наверх и поворот в сторону.</p>
            <div class="box__images2">
                <img src="img/Screenshot_17.png" alt="">
                <img src="img/Screenshot_18.png" alt="">
            </div>
            <p>После этого в кадре 5 добавьте поворот влево, в 6-м - снова вправо. Теперь если прокрутить слайдер, персонаж помашет рукой.</p>
            <p class="story">В 7-м кадре опустите руку на 90° по оси Z, а в 8-м верните её в изначальное положение.</p>
            <img src="img/Screenshot_19.png" alt="">
            <p>Готово! Теперь можно запустить анимацию и посмотреть, как она работает. Для этого нажмите на кнопку play в панели управления анимацией.</p>
            <p class="story">Осталось сохранить анимацию. Для этого нужно нажать на три точки и выбрать <b>Save</b>.</p>
            <img src="img/Screenshot_20.png" alt="">
            <p>По умолчанию анимации длятся максимум 1 секунду. Если вы хотите поменять длительность анимации, измените второе числовое значение рядом с кнопками управления анимацией.</p>


            <hr>
            <h1>Домашкаа 😁</h1>
            <p class="story">Задание 1. Для дополнительной практики применения цикла While в программировании, нужно решить следующую задачу:</p>
            <ol>
                <li>Добавляем на карту блок</li>
                <li>Добавляем к блоку скрипт</li>
                <li>В скрипте создаём переменную с именем block и после знака = пишем script.Parent</li>
                <li>На 2-ой строке скрипта создаем бесконечный цикл While</li>
                <li>Внутри тела цикла обращаемся к переменной block и к свойству Orientation</li>
                <li>В той же строке необходимо написать команды, которые будут прибавлять к повороту 1 градус по оси Y</li>
                <li>В качестве подсказки используйте тот код, который мы писали на занятии</li>
            </ol>
            <p class="story">Задание 2. Необходимо добавить на карту нового персонажа и создать для него анимацию. Не забудьте сохранить её :)</p>
            
        </section>
    </main>

</body>

</html>