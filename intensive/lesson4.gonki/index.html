<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROBLOX - Lesson 4</title>
    <link rel="stylesheet" href="../../css/base.css">
    <link rel="stylesheet" href="../../css/section.css">
    <link rel="stylesheet" href="../../css/media.css">
    <link rel="icon" href="../../img/base/favicon.png">
</head>

<body>

    <main>
        <header>
            <img src="../../img/base/logo.svg" alt="" class="logo">
            <h1>Создание игр в Roblox Studio</h1>
        </header>

        <section>
            <h1>Диалоговая система Roblox</h1>

            <h2>Диалоговая система</h2>
            <p>В большинстве игр есть персонажи, разговаривающие с игроком и дающие ему различные квесты, рассказывающие о мире вокруг, продающие различные вещи и т.д. Все они взаимодействуют с игроком при помощи диалогов - фраз, на которые игрок должен ответить одним из предложенных вариантов ответных фраз.</p>
            <p>Для создания таких систем в Roblox Studio есть специальные объекты, позволяющие достаточно легко настроить диалог с таким персонажем.</p>

            <h3>Создание диалога</h3>
            <p class="important">Для добавления NPC возможности разговаривать с игроком, в Roblox Studio используется специальный объект Dialog - модуль, расширяющий функционал NPC и сообщающий Roblox, что в этом персонаже предусмотрен диалог с игроком.</p>
            <p>Обычно Dialog добавляется в качестве дочернего объекта к голове NPC. Выберите вашего NPC, раскройте его группу в Explorer и найдите в частях тела голову.</p>
            <p class="story">Нажмите на плюс и добавьте объект Dialog:</p>
            <img src="img/Screenshot_1.png" alt="">

            <p>Чтобы диалог заработал, его нужно настроить. Откройте его настройки в окне Properties. Сперва необходимо настроить приветственную фразу персонажа, которую он произнесет при активации диалога. Для этого найдите параметр InitialPrompt. Текст, который вы укажете в этом параметре, будет произнесён NPC как приветственная реплика в начале диалога.</p>
            <p class="story">Измените текст на приветствие:</p>
            <img src="img/Screenshot_2.png" alt="">
            <p>Позже мы будем добавлять варианты ответа на реплики NPC, но одну из них мы можем добавить на этом этапе - реплику прощания.</p>
            <p class="story">Найдите параметр GoodbyeDialog и напишите фразу, которую будет произносить ваш персонаж при прощании с NPC. Сейчас она не будет доступна, однако после добавления вариантов ответа, вы увидите её в списке.</p>
            <img src="img/Screenshot_3.png" alt="">
            <p class="story">Теперь персонаж сможет заговорить с игроком. Запустите игру, подойдите к персонажу и нажмите на иконку диалога - NPC произнесет указанную вами фразу:</p>
            <img src="img/Screenshot_4.png" alt="">
            <p class="important">Также можно изменить дополнительные настройки Purpose и Tone. Purpose изменяет тип диалога. По умолчанию доступны три варианта: Help, Quest и Shop.</p>
            <p class="story">Укажите вариант Quest, чтобы игрокам было понятно, что этот персонаж выдаст им задание.</p>
            <p class="important">Тон определяет отношение NPC к игроку: нейтральное, дружеское или агрессивное.</p>
            <p class="story">Установите дружеское, чтобы изменить цветовую маркировку диалога.</p>
            <img src="img/Screenshot_5.png" alt="">

            <h3>Диалоговое дерево</h3>
            <p>В большинстве хороших игр диалоги строятся по системе диалогового дерева: одна реплика NPC дает игроку несколько вариантов ответа на неё. В зависимости от выбранного варианта, NPC произнесет одну или другую ответную реплику.</p>
            <p class="important">Если игра подразумевает глубокие и проработанные диалоги, вариации ответов и возможных развитий разговора могут разрастаться в запутанную структуру связанных между собой сложной логикой переходов из одного блока диалога в другой. Такая система называется диалоговым деревом (DialogTree) и обычно создается геймдизайнерами и сценаристами.</p>
            <p>В Roblox Studio есть возможность создавать подобные структуры, однако это достаточно сложный процесс, поэтому в этом занятии мы рассмотрим базовый подход к созданию диалоговых систем, добавляя различные ответы игрока на реплики NPC в окне Explorer.</p>

            <h3>Добавление вариантов ответа</h3>
            <p class="story">Добавим первый ответ. Выберите объект Dialog в Explorer и добавьте к нему дочерний объект DialogChoice.</p>
            <img src="img/Screenshot_6.png" alt="">
            <p>Это ещё один специальный объект, позволяющий добавлять дополнительные варианты ответа на реплики NPC.</p>
            <p class="story">Откройте его настройки в окне Properties. Чтобы настроить ответ и последующую реплику персонажа, нужно настроить два параметра: UserDialog и ResponseDialog.</p>
            <img src="img/Screenshot_7.png" alt="">
            <p class="important">UserDialog - это ответ игрока на предыдущую реплику NPC, записанную в родительском объекте. Именно эту строку вы увидите в списке возможных ответов. ResponseDialog - ответ NPC на выбранную игроком реплику.</p>
            <p class="story">Настройте эти параметры:</p>
            <img src="img/Screenshot_8.png" alt="">
            <p class="story">Запустите игру и подойдите к персонажу. Как и в прошлый раз, нажмите на диалог, и вы увидите, что у игрока появились две возможные реплики: ответ, записанный в DialogChoice, и прощальная реплика из родительского объекта Dialog.</p>
            <img src="img/Screenshot_9.png" alt="">
            <p>Таким образом можно добавлять множество различных веток диалога, создавая сложные и интересные разговоры между игроком и NPC.</p>
            <p class="story">Чтобы не запутаться в ответах игрока, переименуйте объекты DialogChoice:</p>
            <img src="img/Screenshot_10.png" alt="">
            <p class="story">Следующий шаг - добавить ещё одну ступень разговора. Продолжим ветку, в которой игрок интересуется, что от него хочет NPC. Выберите соответствующую ветку диалога и добавьте к ней дочерний DialogChoice. Этот вариант ответа будет доступен, если игрок выберет родительскую реплику.</p>
            <img src="img/Screenshot_11.png" alt="">
            <p class="story">Настройте этот ответ так, чтобы в нём игрок интересовался квестом, а NPC рассказал про него:</p>
            <img src="img/Screenshot_12.png" alt="">
            <p class="story">Добавьте ещё один вариант ответа к первой реплике и самостоятельно настройте его. Запустите игру и посмотрите на результат.</p>
            <img src="img/Screenshot_13.png" alt="">
            <p>На данном этапе работа с диалогом завершена.</p>



            <hr>
            <h1>Домашкаа 😁</h1>
            <p>Необходимо добавить ещё одного NPC и настроить для него диалоговую систему с несколькими разветвлениями. Например, если вы на занятии добавили NPC на старте, то при выполнении домашнего задания можно добавить NPC на финише.</p>
            
        </section>
    </main>

</body>

</html>